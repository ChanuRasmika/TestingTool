{"version":3,"file":"ProfileForm-JRkw5gk6.js","sources":["../../../../frontend/src/components/ProfileForm.jsx"],"sourcesContent":["import { useState } from 'react';\r\n\r\nfunction ProfileForm({ user, onProfileUpdated, onClose }) {\r\n  const [formData, setFormData] = useState({\r\n    name: user.name || '',\r\n    email: user.email || ''\r\n  });\r\n  const [profilePicture, setProfilePicture] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(user.profileUrl ? `http://localhost:5000${user.profileUrl}` : null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        setError('File size must be less than 5MB');\r\n        return;\r\n      }\r\n      if (!file.type.startsWith('image/')) {\r\n        setError('Please select an image file');\r\n        return;\r\n      }\r\n      setProfilePicture(file);\r\n      setPreviewUrl(URL.createObjectURL(file));\r\n      setError('');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const formDataToSend = new FormData();\r\n      \r\n      formDataToSend.append('name', formData.name);\r\n      formDataToSend.append('email', formData.email);\r\n      \r\n      if (profilePicture) {\r\n        formDataToSend.append('profilePicture', profilePicture);\r\n      }\r\n\r\n      const response = await fetch('http://localhost:5000/api/profile', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formDataToSend\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        onProfileUpdated(data.user);\r\n        onClose();\r\n      } else {\r\n        setError(data.error || 'Failed to update profile');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError('Network error. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-xl font-bold\">Update Profile</h2>\r\n          <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {/* Profile Picture */}\r\n          <div className=\"text-center\">\r\n            <div className=\"mb-4\">\r\n              {previewUrl ? (\r\n                <img\r\n                  src={previewUrl}\r\n                  alt=\"Profile preview\"\r\n                  className=\"w-24 h-24 rounded-full mx-auto object-cover border-4 border-gray-200\"\r\n                />\r\n              ) : (\r\n                <div className=\"w-24 h-24 rounded-full mx-auto bg-yellow-400 flex items-center justify-center\">\r\n                  <span className=\"text-2xl font-bold text-black\">\r\n                    {formData.name.charAt(0).toUpperCase()}\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <label className=\"cursor-pointer bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-md text-sm\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                className=\"hidden\"\r\n              />\r\n              Change Photo\r\n            </label>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({...formData, name: e.target.value})}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(e) => setFormData({...formData, email: e.target.value})}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex space-x-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"flex-1 px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Updating...' : 'Update Profile'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileForm;"],"names":["useState","error","jsxs","jsx"],"mappings":"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"}